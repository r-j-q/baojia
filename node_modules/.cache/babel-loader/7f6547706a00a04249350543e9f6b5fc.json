{"remainingRequest":"/Users/wangyanli/Documents/a/y/addVue/node_modules/babel-loader/lib/index.js!/Users/wangyanli/Documents/a/y/addVue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangyanli/Documents/a/y/addVue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangyanli/Documents/a/y/addVue/src/pages/permission/menu-manage/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangyanli/Documents/a/y/addVue/src/pages/permission/menu-manage/index.vue","mtime":1684630200000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.regexp.search\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getFirstLevel, getNextLevel } from '@/api/permission';\nexport default {\n  name: 'coolefyCategory',\n  data: function data() {\n    return {\n      firstBuild: {\n        permissionName: '',\n        module: '',\n        permissionCode: ''\n      },\n      editBuild: {\n        permissionName: '',\n        module: '',\n        permissionCode: ''\n      },\n      loading: false,\n      visible: false,\n      newVisible: false,\n      secondVisible: false,\n      thirdVisible: false,\n      totalRecord: 100,\n      checked: false,\n      indeterminate: false,\n      data: [],\n      list: [],\n      expandData: {},\n      checkedData: {},\n      indeterminateData: {},\n      searchData: {\n        pageSize: 10,\n        pageNumber: 1,\n        operateType: '',\n        startDate: '',\n        endDate: ''\n      },\n      currentRow: '',\n      form: {\n        parentId: '',\n        id: '',\n        cnCategoryName: '',\n        sort: '',\n        categoryImg: ''\n      },\n      cnCategoryName: '',\n      cnCategoryNameTwo: '',\n      levelOne: {},\n      // 新建类目\n      newCategoryType: '',\n      parentId: 0,\n      isContact: false,\n      dialogVisible: false,\n      putawayName: '',\n      putawayCategoryId: '',\n      categoryData: {\n        categoryId: '',\n        categoryTreePath: ''\n      },\n      categoryList: [],\n      // 所有类目\n      pageNumber: 1,\n      notPutVisible: false,\n      webCategoryId: '',\n      webPutaway: [],\n      notBelongWeb: [],\n      newPutawayWeb: [],\n      putawayCategoryName: '',\n      // 翻译\n      isTranslate: false,\n      translateVisible: false,\n      translateCncnCategoryName: '',\n      formLabelWidth: '100px',\n      isEdit: true,\n      webArr: []\n    };\n  },\n  mounted: function mounted() {\n    this.search();\n  },\n  methods: {\n    handleNewCategory: function handleNewCategory(type, id) {\n      this.newVisible = true;\n      this.newCategoryType = type;\n\n      if (id) {\n        this.parentId = id;\n      } else {\n        this.parentId = 0;\n      }\n    },\n    setNewCategory: function setNewCategory() {\n      // 新增类目\n      var formData = new URLSearchParams();\n\n      for (var key in this.firstBuild) {\n        if (!this.firstBuild[key]) {\n          this.$message.error('请补充完数据后再操作');\n          return;\n        }\n\n        formData.append(key, this.firstBuild[key]);\n      }\n\n      if (this.newCategoryType === 1) {\n        formData.append('parentId', this.parentId);\n        formData.append('resourceLevel', 1);\n        formData.append('permissionLevel', 1);\n      } else if (this.newCategoryType === 2) {\n        formData.append('parentId', this.parentId);\n        formData.append('resourceLevel', 2);\n        formData.append('permissionLevel', 2);\n      } else if (this.newCategoryType === 3) {\n        formData.append('parentId', this.parentId);\n        formData.append('resourceLevel', 3);\n        formData.append('permissionLevel', 3);\n      }\n    },\n    cancelNewCategory: function cancelNewCategory() {\n      this.newVisible = false;\n      this.newCategory = this.initCategory;\n    },\n    handleSelectTwo: function handleSelectTwo(item) {\n      this.form.parentId = item.id;\n    },\n    handleSelect: function handleSelect(item) {\n      this.form.parentId = item.id;\n      this.cnCategoryNameTwo = '';\n      this.levelOne = item;\n    },\n    update: function update() {\n      var formData = new URLSearchParams();\n\n      for (var key in this.editBuild) {\n        if (!this.editBuild[key]) {\n          this.$message.error('请补充完数据后再操作');\n          return;\n        }\n\n        formData.append(key, this.editBuild[key]);\n      }\n\n      formData.append('parentId', this.currentRow.parentId);\n      formData.append('id', this.currentRow.id);\n      formData.append('resourceLevel', this.currentRow.permissionLevel);\n      formData.append('permissionLevel', this.currentRow.permissionLevel);\n    },\n    showEdit: function showEdit(row) {\n      this.visible = true;\n      this.editBuild = {\n        permissionName: row.permissionName,\n        module: row.module,\n        permissionCode: row.permissionCode\n      };\n      this.currentRow = row;\n    },\n    search: function search() {\n      var _this = this;\n\n      getFirstLevel().then(function (res) {\n        var data = res || [];\n        data = data.map(function (item) {\n          item.childList = [];\n          item.isLoadChild = false;\n          item.cnCategoryName = item.permissionName;\n          item.categoryLevel = item.resourceLevel;\n          return item;\n        });\n        _this.data = data;\n        _this.list = data;\n      });\n    },\n    findSourceDataById: function findSourceDataById(id, list) {\n      var len = list.length;\n\n      for (var i = 0; i < len; i += 1) {\n        var item = list[i];\n\n        if (item.id === id) {\n          return item;\n        }\n\n        if (item.childList) {\n          var ret = this.findSourceDataById(id, item.childList);\n\n          if (ret) {\n            return ret;\n          }\n        }\n      }\n    },\n    toggleExpend: function toggleExpend(d) {\n      var _this2 = this;\n\n      var data = this.data;\n\n      if (!d.isLoadChild) {\n        getNextLevel(d.id).then(function (r) {\n          r.forEach(function (item, index) {\n            item.cnCategoryName = item.permissionName;\n            item.categoryLevel = item.resourceLevel;\n          });\n          var childList = r || [];\n          _this2.expandData[d.id] = true;\n          d.isLoadChild = true;\n          d.childList = childList;\n          _this2.list = _this2.makeFlatData(data);\n        });\n      } else {\n        this.expandData[d.id] = !this.expandData[d.id];\n        this.list = this.makeFlatData(data);\n      }\n    },\n    makeFlatData: function makeFlatData(list) {\n      var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var len = list.length;\n      var data = [];\n      var i = 0;\n\n      for (; i < len; i += 1) {\n        var item = list[i];\n        data.push(item);\n\n        if (item.childList && this.expandData[item.id]) {\n          var childList = this.makeFlatData(item.childList, level + 1);\n          data = data.concat(childList);\n        }\n      }\n\n      return data;\n    },\n    back: function back() {\n      this.isContact = false;\n      this.webArr = [];\n      this.webPutaway = [];\n      this.webCategoryId = '';\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["\n<template lang=\"html\">\n<el-card class=\"box-card\">\n  <div>\n    <div style=\"margin-bottom:10px;\">\n      <el-button type=\"success\" icon=\"el-icon-plus\" size=\"small\" @click=\"handleNewCategory(1,0)\">新增菜单</el-button>\n    </div>\n    <el-table\n      v-loading=\"loading\"\n      :data=\"list\"\n      highlight-current-row\n      border\n      size=\"small\">\n      <el-table-column\n        label=\"分类名称\"\n        align=\"left\"\n      >\n        <template slot-scope=\"scope\">\n          <a :style=\"`margin-left: ${(scope.row.categoryLevel - 1) * 20}px`\" class=\"category-row\">\n            <i class=\"block-icon\" v-if=\"scope.row.categoryLevel<3\" :class=\"[expandData[scope.row.id] ? 'el-icon-minus' : 'el-icon-plus']\" @click=\"toggleExpend(scope.row)\"></i>\n            <span v-if=\"scope.row.categoryLevel>=3\" style=\"margin-left: 20px\"></span>\n            <span class=\"category-name\">{{scope.row.categoryLevel}}&emsp;{{ scope.row.permissionName }}\n              <i class=\"el-icon-edit\" @click=\"showEdit(scope.row)\"></i>\n            </span>\n          </a>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"操作\"\n        width=\"350\"\n      >\n        <template slot-scope=\"scope\">\n  <div>\n    <el-button\n      size=\"small\"\n      v-if=\"scope.row.permissionLevel<3\"\n      @click=\"handleNewCategory(scope.row.permissionLevel+1,scope.row.id)\"\n    >添加子分类</el-button>\n  </div>\n</template>\n      </el-table-column>\n    </el-table>\n    <!-- 编辑类目弹窗 -->\n    <el-dialog\n      title=\"编辑类目\"\n      :visible.sync=\"visible\"\n      width=\"30%\">\n      <el-form label-width=\"100px\">\n        <el-row>\n          <el-col :span=\"24\" >\n            <el-form-item label=\"权限名称\">\n              <el-input v-model=\"editBuild.permissionName\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"权限代码\">\n              <el-input :disabled=\"true\" v-model=\"editBuild.permissionCode\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"模块名\">\n              <el-input v-model=\"editBuild.module\"></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"visible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"update\">确 定</el-button>\n      </span>\n    </el-dialog>\n    <!-- 新增类目弹窗 -->\n    <el-dialog\n      title=\"新增类目\"\n      :visible.sync=\"newVisible\"\n      width=\"50%\">\n      <el-form label-width=\"100px\">\n        <el-row>\n          <el-col :span=\"24\" >\n            <el-form-item label=\"权限名称\">\n              <el-input v-model=\"firstBuild.permissionName\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"权限代码\">\n              <el-input v-model=\"firstBuild.permissionCode\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"模块名\">\n              <el-input v-model=\"firstBuild.module\"></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"cancelNewCategory\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"setNewCategory\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</el-card>\n</template>\n\n<script>\nimport { getFirstLevel, getNextLevel } from '@/api/permission'\nexport default {\n    name: 'coolefyCategory',\n    data() {\n        return {\n            firstBuild: {\n                permissionName: '',\n                module: '',\n                permissionCode: ''\n            },\n            editBuild: {\n                permissionName: '',\n                module: '',\n                permissionCode: ''\n            },\n            loading: false,\n            visible: false,\n            newVisible: false,\n            secondVisible: false,\n            thirdVisible: false,\n            totalRecord: 100,\n            checked: false,\n            indeterminate: false,\n            data: [],\n            list: [],\n            expandData: {},\n            checkedData: {},\n            indeterminateData: {},\n            searchData: {\n                pageSize: 10,\n                pageNumber: 1,\n                operateType: '',\n                startDate: '',\n                endDate: ''\n            },\n            currentRow: '',\n            form: {\n                parentId: '',\n                id: '',\n                cnCategoryName: '',\n                sort: '',\n                categoryImg: ''\n            },\n            cnCategoryName: '',\n            cnCategoryNameTwo: '',\n            levelOne: {},\n\n            // 新建类目\n            newCategoryType: '',\n            parentId: 0,\n            isContact: false,\n            dialogVisible: false,\n            putawayName: '',\n            putawayCategoryId: '',\n            categoryData: { categoryId: '', categoryTreePath: '' },\n            categoryList: [], // 所有类目\n            pageNumber: 1,\n            notPutVisible: false,\n            webCategoryId: '',\n            webPutaway: [],\n            notBelongWeb: [],\n            newPutawayWeb: [],\n            putawayCategoryName: '',\n            // 翻译\n            isTranslate: false,\n            translateVisible: false,\n            translateCncnCategoryName: '',\n            formLabelWidth: '100px',\n\n            isEdit: true,\n            webArr: []\n        }\n    },\n    mounted() {\n        this.search()\n    },\n    methods: {\n        handleNewCategory(type, id) {\n            this.newVisible = true\n            this.newCategoryType = type\n            if (id) {\n                this.parentId = id\n            } else {\n                this.parentId = 0\n            }\n        },\n        setNewCategory() {\n            // 新增类目\n            var formData = new URLSearchParams()\n            for (var key in this.firstBuild) {\n                if (!this.firstBuild[key]) {\n                    this.$message.error('请补充完数据后再操作')\n                    return\n                }\n                formData.append(key, this.firstBuild[key])\n            }\n            if (this.newCategoryType === 1) {\n                formData.append('parentId', this.parentId)\n                formData.append('resourceLevel', 1)\n                formData.append('permissionLevel', 1)\n            } else if (this.newCategoryType === 2) {\n                formData.append('parentId', this.parentId)\n                formData.append('resourceLevel', 2)\n                formData.append('permissionLevel', 2)\n            } else if (this.newCategoryType === 3) {\n                formData.append('parentId', this.parentId)\n                formData.append('resourceLevel', 3)\n                formData.append('permissionLevel', 3)\n            }\n        },\n        cancelNewCategory() {\n            this.newVisible = false\n            this.newCategory = this.initCategory\n        },\n        handleSelectTwo(item) {\n            this.form.parentId = item.id\n        },\n        handleSelect(item) {\n            this.form.parentId = item.id\n            this.cnCategoryNameTwo = ''\n            this.levelOne = item\n        },\n\n        update() {\n            var formData = new URLSearchParams()\n            for (var key in this.editBuild) {\n                if (!this.editBuild[key]) {\n                    this.$message.error('请补充完数据后再操作')\n                    return\n                }\n                formData.append(key, this.editBuild[key])\n            }\n            formData.append('parentId', this.currentRow.parentId)\n            formData.append('id', this.currentRow.id)\n            formData.append('resourceLevel', this.currentRow.permissionLevel)\n            formData.append('permissionLevel', this.currentRow.permissionLevel)\n        },\n        showEdit(row) {\n            this.visible = true\n            this.editBuild = {\n                permissionName: row.permissionName,\n                module: row.module,\n                permissionCode: row.permissionCode\n            }\n            this.currentRow = row\n        },\n        search() {\n            getFirstLevel().then(res => {\n                let data = res || []\n                data = data.map(item => {\n                    item.childList = []\n                    item.isLoadChild = false\n                    item.cnCategoryName = item.permissionName\n                    item.categoryLevel = item.resourceLevel\n                    return item\n                })\n                this.data = data\n                this.list = data\n            })\n        },\n        findSourceDataById(id, list) {\n            const len = list.length\n            for (let i = 0; i < len; i += 1) {\n                const item = list[i]\n                if (item.id === id) {\n                    return item\n                }\n                if (item.childList) {\n                    const ret = this.findSourceDataById(id, item.childList)\n                    if (ret) {\n                        return ret\n                    }\n                }\n            }\n        },\n        toggleExpend(d) {\n            let { data } = this\n            if (!d.isLoadChild) {\n                getNextLevel(d.id).then(r => {\n                    r.forEach((item, index) => {\n                        item.cnCategoryName = item.permissionName\n                        item.categoryLevel = item.resourceLevel\n                    })\n                    const childList = r || []\n                    this.expandData[d.id] = true\n                    d.isLoadChild = true\n                    d.childList = childList\n                    this.list = this.makeFlatData(data)\n                })\n            } else {\n                this.expandData[d.id] = !this.expandData[d.id]\n                this.list = this.makeFlatData(data)\n            }\n        },\n        makeFlatData(list, level = 0) {\n            const len = list.length\n            let data = []\n            let i = 0\n\n            for (; i < len; i += 1) {\n                const item = list[i]\n                data.push(item)\n                if (item.childList && this.expandData[item.id]) {\n                    const childList = this.makeFlatData(\n                        item.childList,\n                        level + 1\n                    )\n                    data = data.concat(childList)\n                }\n            }\n            return data\n        },\n        back() {\n            this.isContact = false\n            this.webArr = []\n            this.webPutaway = []\n            this.webCategoryId = ''\n        }\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n.block-icon {\n    border: 1px solid #1ab394;\n    border-radius: 2px;\n    color: #1ab394;\n    display: inline-block;\n    height: 14px;\n    line-height: 14px;\n    text-align: center;\n    vertical-align: middle;\n    width: 14px;\n}\n.category-row {\n    display: inline-block;\n    width: 100%;\n    i.el-icon-edit {\n        color: #1ab394;\n        display: none;\n        margin-left: 20px;\n        font-size: 16px;\n    }\n    &:hover {\n        i {\n            display: inline-block;\n        }\n    }\n}\n\n.putaway-header {\n    font-size: 14px;\n    color: #606266;\n    margin-bottom: 10px;\n}\n.el-tag {\n    margin-left: 10px;\n    margin-bottom: 10px;\n}\n.button-new-tag {\n    margin-left: 10px;\n    height: 32px;\n    line-height: 30px;\n    padding-top: 0;\n    padding-bottom: 0;\n}\n.input-new-tag {\n    width: 90px;\n    margin-left: 10px;\n    vertical-align: bottom;\n}\n\n.header-title {\n    margin-bottom: 10px;\n    color: #606266;\n}\n\n.not-belong-Web {\n    min-height: 450px;\n}\n.category-item {\n    display: inline-block;\n    min-width: 220px;\n    vertical-align: top;\n    .title {\n        text-align: center;\n        font-size: 16px;\n        line-height: 35px;\n    }\n    .content {\n        width: 100%;\n        border: 1px solid #888;\n        height: 750px;\n        box-sizing: border-box;\n        overflow-y: hidden;\n        padding: 10px 0;\n        border-radius: 3px;\n    }\n}\n.category-list {\n    border: 1px solid #ccc;\n    height: 100%;\n    box-sizing: border-box;\n    overflow-y: auto;\n    width: 200px;\n    display: inline-block;\n    margin: 0 5px;\n    font-size: 0;\n    li {\n        padding: 5px;\n        width: 100%;\n        font-size: 14px;\n        box-sizing: border-box;\n        cursor: pointer;\n        i {\n            float: right;\n        }\n        &.active {\n            background: #58b7ff;\n            color: #fff !important;\n        }\n    }\n}\n.colorBlue {\n    color: #58b7ff;\n}\n.translate-item {\n    margin-bottom: 10px;\n    .left {\n        display: inline-block;\n        margin-right: 10px;\n        width: 80px;\n        text-align: right;\n    }\n    .right {\n        display: inline-block;\n    }\n    .category-word {\n        display: inline-block;\n        margin-right: 10px;\n    }\n}\n</style>\n<style>\n.bgc-yellow input {\n    background-color: #fff000;\n}\n</style>\n"],"sourceRoot":"src/pages/permission/menu-manage"}]}