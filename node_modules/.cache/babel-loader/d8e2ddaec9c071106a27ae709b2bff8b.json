{"remainingRequest":"/Users/wangyanli/Documents/a/y/addVue/node_modules/babel-loader/lib/index.js!/Users/wangyanli/Documents/a/y/addVue/src/store/modules/permission.js","dependencies":[{"path":"/Users/wangyanli/Documents/a/y/addVue/src/store/modules/permission.js","mtime":1684630200000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/wangyanli/Documents/a/y/addVue/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/wangyanli/Documents/a/y/addVue/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport { fetchPermission } from '@/api/permission';\nimport router, { DynamicRoutes } from '@/router/index';\nimport { recursionRouter } from '@/utils/recursion-router';\nimport dynamicRouter from '@/router/dynamic-router';\nexport default {\n  namespaced: true,\n  state: {\n    permissionList: null\n    /** 所有路由 */\n    ,\n    sidebarMenu: []\n    /** 导航菜单 */\n    ,\n    currentMenu: ''\n    /** 当前active导航菜单 */\n    ,\n    control_list: []\n    /** 完整的权限列表 */\n    ,\n    avatar: ''\n    /** 头像 */\n    ,\n    account: ''\n    /** 用户角色 */\n\n  },\n  getters: {},\n  mutations: {\n    SET_AVATAR: function SET_AVATAR(state, avatar) {\n      state.avatar = avatar;\n    },\n    SET_ACCOUNT: function SET_ACCOUNT(state, account) {\n      state.account = account;\n    },\n    SET_PERMISSION: function SET_PERMISSION(state, routes) {\n      state.permissionList = routes;\n    },\n    CLEAR_PERMISSION: function CLEAR_PERMISSION(state) {\n      state.permissionList = null;\n    },\n    SET_MENU: function SET_MENU(state, menu) {\n      state.sidebarMenu = menu;\n    },\n    CLEAR_MENU: function CLEAR_MENU(state) {\n      state.sidebarMenu = [];\n    },\n    SET_CURRENT_MENU: function SET_CURRENT_MENU(state, currentMenu) {\n      state.currentMenu = currentMenu;\n    },\n    SET_CONTROL_LIST: function SET_CONTROL_LIST(state, list) {\n      state.control_list = list;\n    }\n  },\n  actions: {\n    FETCH_PERMISSION: function () {\n      var _FETCH_PERMISSION = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(_ref) {\n        var commit, state, permissionList, routes, MainContainer, children, initialRoutes;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                commit = _ref.commit, state = _ref.state;\n                _context.next = 3;\n                return fetchPermission();\n\n              case 3:\n                permissionList = _context.sent;\n                commit('SET_AVATAR', permissionList.avatar);\n                commit('SET_ACCOUNT', permissionList.name);\n                routes = recursionRouter(permissionList.data, dynamicRouter);\n                MainContainer = DynamicRoutes.find(function (v) {\n                  return v.path === '';\n                });\n                children = MainContainer.children;\n                commit('SET_CONTROL_LIST', [].concat(_toConsumableArray(children), _toConsumableArray(dynamicRouter)));\n                children.push.apply(children, _toConsumableArray(routes));\n                commit('SET_MENU', children);\n                initialRoutes = router.options.routes;\n                router.addRoutes(DynamicRoutes);\n                commit('SET_PERMISSION', [].concat(_toConsumableArray(initialRoutes), _toConsumableArray(DynamicRoutes)));\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function FETCH_PERMISSION(_x) {\n        return _FETCH_PERMISSION.apply(this, arguments);\n      }\n\n      return FETCH_PERMISSION;\n    }()\n  }\n};",{"version":3,"sources":["/Users/wangyanli/Documents/a/y/addVue/src/store/modules/permission.js"],"names":["fetchPermission","router","DynamicRoutes","recursionRouter","dynamicRouter","namespaced","state","permissionList","sidebarMenu","currentMenu","control_list","avatar","account","getters","mutations","SET_AVATAR","SET_ACCOUNT","SET_PERMISSION","routes","CLEAR_PERMISSION","SET_MENU","menu","CLEAR_MENU","SET_CURRENT_MENU","SET_CONTROL_LIST","list","actions","FETCH_PERMISSION","commit","name","data","MainContainer","find","v","path","children","push","initialRoutes","options","addRoutes"],"mappings":"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","sourcesContent":["import { fetchPermission } from '@/api/permission'\nimport router, { DynamicRoutes } from '@/router/index'\nimport { recursionRouter } from '@/utils/recursion-router'\nimport dynamicRouter from '@/router/dynamic-router'\n\nexport default {\n    namespaced: true,\n    state: {\n        permissionList: null /** 所有路由 */,\n        sidebarMenu: [] /** 导航菜单 */,\n        currentMenu: '' /** 当前active导航菜单 */,\n        control_list: [] /** 完整的权限列表 */,\n        avatar: ''/** 头像 */,\n        account: ''/** 用户角色 */\n    },\n    getters: {},\n    mutations: {\n        SET_AVATAR(state, avatar) {\n            state.avatar = avatar\n        },\n        SET_ACCOUNT(state, account) {\n            state.account = account\n        },\n        SET_PERMISSION(state, routes) {\n            state.permissionList = routes\n        },\n        CLEAR_PERMISSION(state) {\n            state.permissionList = null\n        },\n        SET_MENU(state, menu) {\n            state.sidebarMenu = menu\n        },\n        CLEAR_MENU(state) {\n            state.sidebarMenu = []\n        },\n        SET_CURRENT_MENU(state, currentMenu) {\n            state.currentMenu = currentMenu\n        },\n        SET_CONTROL_LIST(state, list) {\n            state.control_list = list\n        }\n    },\n    actions: {\n        async FETCH_PERMISSION({ commit, state }) {\n            let permissionList = await fetchPermission()\n            commit('SET_AVATAR', permissionList.avatar)\n            commit('SET_ACCOUNT', permissionList.name)\n            let routes = recursionRouter(permissionList.data, dynamicRouter)\n            let MainContainer = DynamicRoutes.find(v => v.path === '')\n            let children = MainContainer.children\n            commit('SET_CONTROL_LIST', [...children, ...dynamicRouter])\n            children.push(...routes)\n            commit('SET_MENU', children)\n            let initialRoutes = router.options.routes\n            router.addRoutes(DynamicRoutes)\n            commit('SET_PERMISSION', [...initialRoutes, ...DynamicRoutes])\n        }\n    }\n}\n"]}]}