{"remainingRequest":"/Users/wangyanli/Documents/a/y/addVue/node_modules/babel-loader/lib/index.js!/Users/wangyanli/Documents/a/y/addVue/src/config/httpConfig.js","dependencies":[{"path":"/Users/wangyanli/Documents/a/y/addVue/src/config/httpConfig.js","mtime":1684677984000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport store from '@/store/index.js';\nimport baseURL from \"./baseUrl\";\nimport { Message } from 'element-ui';\nvar http = {};\nvar instance = axios.create({\n  timeout: 5000,\n  baseURL: baseURL,\n  validateStatus: function validateStatus(status) {\n    switch (status) {\n      case 400:\n        Message.error('请求出错');\n        break;\n\n      case 401:\n        Message.warning({\n          message: '授权失败，请重新登录'\n        });\n        store.commit('LOGIN_OUT');\n        setTimeout(function () {\n          window.location.reload();\n        }, 1000);\n        return;\n\n      case 403:\n        Message.warning({\n          message: '拒绝访问'\n        });\n        break;\n\n      case 404:\n        Message.warning({\n          message: '请求错误,未找到该资源'\n        });\n        break;\n\n      case 500:\n        Message.warning({\n          message: '服务端错误'\n        });\n        break;\n    }\n\n    return status >= 200 && status < 300;\n  }\n}); // 添加请求拦截器\n\ninstance.interceptors.request.use(function (config) {\n  // 请求头添加token\n  if (store.state.UserToken) {\n    config.headers.Authorization = \"Bearer \".concat(store.state.UserToken);\n  }\n\n  config.headers['Content-Type'] = 'application/json';\n  config.data = JSON.stringify(config.data);\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n}); // 响应拦截器即异常处理\n\ninstance.interceptors.response.use(function (response) {\n  return response.data;\n}, function (err) {\n  if (err && err.response) {} else {\n    err.message = '连接服务器失败';\n  } // Message.error({\n  //     message: err.message\n  // })\n\n\n  return Promise.reject(err.response);\n});\n\nhttp.get = function (url, options) {\n  var loading;\n\n  if (!options || options.isShowLoading !== false) {\n    loading = document.getElementById('ajaxLoading');\n    loading.style.display = 'block';\n  }\n\n  return new Promise(function (resolve, reject) {\n    instance.get(url, options).then(function (response) {\n      if (!options || options.isShowLoading !== false) {\n        loading = document.getElementById('ajaxLoading');\n        loading.style.display = 'none';\n      }\n\n      if (response.code === 1) {\n        resolve(response.data);\n      } else {\n        Message.error({\n          message: response.msg\n        });\n        reject(response.msg);\n      }\n    }).catch(function (e) {\n      console.log(e);\n    });\n  });\n};\n\nhttp.post = function (url, data, options) {\n  // let loading\n  // if (!options || options.isShowLoading !== false) {\n  //     loading = document.getElementById('ajaxLoading')\n  //     loading.style.display = 'block'\n  // }\n  return new Promise(function (resolve, reject) {\n    instance.post(url, data, options).then(function (response) {\n      // if (!options || options.isShowLoading !== false) {\n      //     loading = document.getElementById('ajaxLoading')\n      //     loading.style.display = 'none'\n      // }\n      if (response.code === 1) {\n        resolve(response.data);\n      } else {\n        Message.error({\n          message: response.msg\n        });\n        reject(response.message);\n      }\n    }).catch(function (e) {\n      console.log(e);\n    });\n  });\n};\n\nexport default http;",{"version":3,"sources":["/Users/wangyanli/Documents/a/y/addVue/src/config/httpConfig.js"],"names":["axios","store","baseURL","Message","http","instance","create","timeout","validateStatus","status","error","warning","message","commit","setTimeout","window","location","reload","interceptors","request","use","config","state","UserToken","headers","Authorization","data","JSON","stringify","Promise","reject","response","err","get","url","options","loading","isShowLoading","document","getElementById","style","display","resolve","then","code","msg","catch","e","console","log","post"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport store from '@/store/index.js'\nimport baseURL from './baseUrl'\nimport { Message } from 'element-ui'\nconst http = {}\n\nvar instance = axios.create({\n    timeout: 5000,\n    baseURL,\n    validateStatus(status) {\n        switch (status) {\n        case 400:\n            Message.error('请求出错')\n            break\n        case 401:\n            Message.warning({\n                message: '授权失败，请重新登录'\n            })\n            store.commit('LOGIN_OUT')\n            setTimeout(() => {\n                window.location.reload()\n            }, 1000)\n            return\n        case 403:\n            Message.warning({\n                message: '拒绝访问'\n            })\n            break\n        case 404:\n            Message.warning({\n                message: '请求错误,未找到该资源'\n            })\n            break\n        case 500:\n            Message.warning({\n                message: '服务端错误'\n            })\n            break\n        }\n        return status >= 200 && status < 300\n    }\n})\n\n// 添加请求拦截器\ninstance.interceptors.request.use(\n    function(config) {\n        // 请求头添加token\n        if (store.state.UserToken) {\n            config.headers.Authorization = `Bearer ${store.state.UserToken}`\n        }\n        config.headers['Content-Type'] = 'application/json'\n        config.data=JSON.stringify(config.data); \n        return config\n    },\n    function(error) {\n        return Promise.reject(error)\n    }\n)\n\n// 响应拦截器即异常处理\ninstance.interceptors.response.use(\n    response => {\n        return response.data\n    },\n    err => {\n        if (err && err.response) {\n        } else {\n            err.message = '连接服务器失败'\n        }\n        // Message.error({\n        //     message: err.message\n        // })\n        return Promise.reject(err.response)\n    }\n)\n\nhttp.get = function(url, options) {\n    let loading\n    if (!options || options.isShowLoading !== false) {\n        loading = document.getElementById('ajaxLoading')\n        loading.style.display = 'block'\n    }\n    return new Promise((resolve, reject) => {\n        instance\n            .get(url, options)\n            .then(response => {\n                if (!options || options.isShowLoading !== false) {\n                    loading = document.getElementById('ajaxLoading')\n                    loading.style.display = 'none'\n                }\n                if (response.code === 1) {\n                    resolve(response.data)\n                } else {\n                    Message.error({\n                        message: response.msg\n                    })\n                    reject(response.msg)\n                }\n            })\n            .catch(e => {\n                console.log(e)\n            })\n    })\n}\n\nhttp.post = function(url, data, options) {\n    // let loading\n    // if (!options || options.isShowLoading !== false) {\n    //     loading = document.getElementById('ajaxLoading')\n    //     loading.style.display = 'block'\n    // }\n    return new Promise((resolve, reject) => {\n        instance\n            .post(url, data, options)\n            .then(response => {\n                // if (!options || options.isShowLoading !== false) {\n                //     loading = document.getElementById('ajaxLoading')\n                //     loading.style.display = 'none'\n                // }\n                if (response.code === 1) {\n                    resolve(response.data)\n                } else {\n                    Message.error({\n                        message: response.msg\n                    })\n                    reject(response.message)\n                }\n            })\n            .catch(e => {\n                console.log(e)\n            })\n    })\n}\n\nexport default http\n"]}]}