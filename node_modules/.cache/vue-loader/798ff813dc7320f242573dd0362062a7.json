{"remainingRequest":"/Users/wangyanli/Documents/a/y/addVue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangyanli/Documents/a/y/addVue/src/pages/permission/user-manage/index.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/wangyanli/Documents/a/y/addVue/src/pages/permission/user-manage/index.vue","mtime":1684630200000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangyanli/Documents/a/y/addVue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.fr{\n    float:right;\n}\n.fl{\n    float:left;\n}\n.search-bar{\n    overflow: hidden;\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/permission/user-manage","sourcesContent":["<template lang=\"html\">\n  <el-card class=\"box-card\">\n    <div class=\"search-bar\">\n      <el-form :inline=\"true\" :model=\"searchData\" class=\"fl\">\n        <el-input style=\"display: none;\"></el-input>\n        <el-form-item label=\"登录名称\">\n          <el-input v-model=\"searchData.loginName\" placeholder=\"登录名称\" @keyup.enter.native=\"onSearch()\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div class=\"fl\">\n        <el-button type=\"text\" @click=\"handleReset\">重置</el-button>\n        <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"onSearch\">查询</el-button>\n      </div>\n    </div>\n    <div  class=\"tools-bar\">\n      <el-button type=\"success\" icon=\"el-icon-plus\" size=\"small\" @click=\"dialogVisible = true;dialogTitle='新增用户'\">新增用户</el-button>\n    </div>\n    <div>\n      <el-table\n        v-loading.body=\"tableLoading\"\n        ref=\"singleTable\"\n        :data=\"tableData\"\n        border\n        highlight-current-row\n        style=\"width: 100%\">\n        <el-table-column\n          type=\"index\"\n          width=\"60\">\n        </el-table-column>\n        <el-table-column\n          prop=\"status\"\n          label=\"停用/启用\"\n          align=\"center\"\n          min-width=\"100\">\n          <template slot-scope=\"scope\">\n            <!-- <el-tag v-if=\"scope.row.status=='1'\" color=\"#13CE66\">启用</el-tag>\n            <el-tag v-if=\"scope.row.status=='0'\" color=\"#FF4949\">停用</el-tag> -->\n            <el-switch\n              v-model=\"scope.row.status\"\n              :active-value=\"1\"\n              :inactive-value=\"0\"\n              active-text=\"\"\n              inactive-text=\"\"\n              @change=\"handleStatus(scope.row)\">\n            </el-switch>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"loginName\"\n          label=\"登录名\"\n          min-width=\"120\">\n        </el-table-column>\n        <el-table-column\n          prop=\"name\"\n          label=\"真实姓名\"\n          min-width=\"120\">\n        </el-table-column>\n        <el-table-column\n          prop=\"mobile\"\n          label=\"联系电话\"\n          width=\"130\">\n        </el-table-column>\n        <el-table-column\n          prop=\"roleList\"\n          :formatter=\"roleFormatter\"\n          min-width=\"210\"\n          label=\"权限\">\n        </el-table-column>\n        <el-table-column\n          prop=\"address\"\n          min-width=\"200\"\n          label=\"联系地址\">\n        </el-table-column>\n        <el-table-column\n          prop=\"email\"\n          label=\"电子邮箱\"\n          width=\"250\">\n        </el-table-column>\n        <el-table-column\n          prop=\"lastLoginTime\"\n          label=\"最后登录时间\"\n          :formatter=\"toDateTime\"\n          width=\"180\">\n        </el-table-column>\n        <el-table-column\n          label=\"操作\"\n          fixed=\"right\"\n          width=\"170\">\n          <template slot-scope=\"scope\">\n  <div>\n    <el-button\n      type=\"text\"\n      size=\"small\"\n      @click=\"handleEdit(scope.$index, scope.row)\"\n    >编辑</el-button>\n    <el-button\n      type=\"text\"\n      size=\"small\"\n      @click=\"handleResetPwd(scope.$index, scope.row)\"\n    >重置密码</el-button>\n  </div>\n</template>\n        </el-table-column>\n      </el-table>\n      <div class=\"pagination-bar\">\n        <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :page-sizes=\"[10, 25, 50, 100]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"totalRecord\">\n        </el-pagination>\n      </div>\n    </div>\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" @close=\"onDialogClose()\">\n      <el-form ref=\"dataForm\" :rules=\"rules\" :model=\"dataForm\" label-width=\"80px\">\n        <el-form-item label=\"登录名\" prop=\"loginName\">\n          <template v-if=\"dialogTitle=='修改用户信息'\">{{dataForm.loginName}}</template>\n          <el-input v-else v-model=\"dataForm.loginName\" placeholder=\"登录名\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"用户角色\" prop=\"roleIds\">\n          <el-select v-model=\"dataForm.tempRoleIds\" multiple placeholder=\"请选择\" style=\"width: 100%;\">\n            <el-option\n              v-for=\"item in roles\"\n              :key=\"item.id\"\n              :label=\"item.roleName\"\n              :value=\"item.id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"真实姓名\" prop=\"name\">\n              <el-input v-model=\"dataForm.name\" placeholder=\"真实姓名\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"联系电话\" prop=\"mobile\">\n              <el-input v-model=\"dataForm.mobile\" placeholder=\"联系电话\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"联系地址\" prop=\"address\">\n              <el-input v-model=\"dataForm.address\" placeholder=\"联系地址\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"电子邮箱\" prop=\"email\">\n              <el-input v-model=\"dataForm.email\" placeholder=\"电子邮箱\"></el-input>\n            </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"info\" @click=\"onDialogSubmit()\" v-if=\"dialogTitle=='修改用户信息'\">保存</el-button>\n        <el-button type=\"primary\" @click=\"onDialogSubmit()\" v-else>立即创建</el-button>\n      </div>\n    </el-dialog>\n  </el-card>\n</template>\n<script>\nimport { getUserList } from '@/api/permission'\nimport moment from 'moment'\nexport default {\n    data() {\n        return {\n            totalRecord: 0,\n            pageSize: 10,\n            tableLoading: false,\n            dialogVisible: false,\n            dialogTitle: '新增用户',\n            roles: [\n                {\n                    id: 1,\n                    roleName: '超级管理员'\n                },\n                {\n                    id: 2,\n                    roleName: '普通用户'\n                }\n            ],\n            defaultTreeProps: {\n                children: 'childPermList',\n                label: 'permissionName'\n            },\n            rules: {\n                loginName: [\n                    {\n                        required: true,\n                        message: '登录名不能为空',\n                        trigger: 'blur'\n                    },\n                    {\n                        min: 1,\n                        max: 50,\n                        message: '登录名长度在 1 到 50 个字符',\n                        trigger: 'blur'\n                    }\n                ],\n                name: [\n                    {\n                        required: true,\n                        message: '真实姓名不能为空',\n                        trigger: 'blur'\n                    },\n                    {\n                        min: 1,\n                        max: 20,\n                        message: '真实姓名长度在 1 到 20 个字符',\n                        trigger: 'blur'\n                    }\n                ],\n                mobile: [\n                    {\n                        required: true,\n                        message: '联系电话不能为空',\n                        trigger: 'blur'\n                    },\n                    {\n                        pattern: /^(13|15|18|14|17)[0-9]{9}$/,\n                        message: '手机号码格式不正确',\n                        trigger: 'blur'\n                    }\n                ],\n                email: [\n                    {\n                        required: true,\n                        message: '请输入邮箱地址',\n                        trigger: 'blur'\n                    },\n                    {\n                        type: 'email',\n                        message: '邮箱格式不正确',\n                        trigger: 'blur, change'\n                    }\n                ]\n            },\n            searchData: {\n                loginName: ''\n            },\n            dataForm: {\n                id: '',\n                loginName: '',\n                tempRoleIds: [],\n                roleIds: '',\n                name: '',\n                mobile: '',\n                address: '',\n                email: ''\n            },\n            tableData: []\n        }\n    },\n    created() {\n        this.initList()\n    },\n    methods: {\n        async initList() {\n            const data = await getUserList()\n            this.tableData = data\n        },\n        handleStatus(row) {},\n        statusFormat(row, column, cellValue) {\n            return { '0': '停用', '1': '启用' }[cellValue] || ''\n        },\n        onDialogClose() {\n            this.dataForm.tempRoleIds = []\n            this.$refs.dataForm.resetFields()\n        },\n        handleSizeChange(val) {\n            this.pageSize = val\n            this.onSearch()\n        },\n        handleCurrentChange(val) {\n            this.onSearch({ pageNumber: val })\n        },\n        handleReset() {\n            this.searchData = {\n                loginName: ''\n            }\n            this.onSearch()\n        },\n        onSearch({ pageNumber = 1 } = {}) {},\n        toDateTime(row, column, cellValue) {\n            return cellValue\n                ? moment(cellValue).format('YYYY-MM-DD HH:mm:ss')\n                : ''\n        },\n        roleFormatter(row, column, cellValue) {\n            let result = []\n            if (typeof row.erpMemberRoles === 'object' && row.erpMemberRoles.length > 0) {\n                for (let item of row.erpMemberRoles) {\n                    result.push(item.roleName)\n                }\n            }\n            return result.join('，')\n        },\n        handleChangeStatus(index, row) {},\n        handleResetPwd(index, row) {\n            this.$confirm('确认重置该用户的登录密码？', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {})\n        },\n        handleEdit(index, row) {\n            this.dialogVisible = true\n            this.dialogTitle = '修改用户信息'\n            this.dataForm.tempRoleIds = []\n            for (let x of Object.keys(this.dataForm)) {\n                if (\n                    x === 'tempRoleIds' &&\n                    typeof row.roleList === 'object' &&\n                    row.roleList.length > 0\n                ) {\n                    for (let item of row.roleList) {\n                        this.dataForm.tempRoleIds.push(item.id)\n                    }\n                } else {\n                    this.dataForm[x] = row[x]\n                }\n            }\n        },\n        onDialogSubmit() {}\n    }\n}\n</script>\n\n<style lang=\"scss\">\n.fr{\n    float:right;\n}\n.fl{\n    float:left;\n}\n.search-bar{\n    overflow: hidden;\n}\n</style>\n\n<style>\n.tools-bar{\n  margin-bottom:20px;\n}\n</style>\n"]}]}